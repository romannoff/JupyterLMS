{% extends "main/base.html" %}
{% load static %}
{% block content %}
<main class="MainContent">
    <div class="SplitContainer">
        <div class="TaskDescription">
            <h1 class="TaskTitle">{{ title.name }}</h1>
            <div class="TaskInfo">
                <p><strong>Описание:</strong></p> 
                {{ description }}
                {% if best_solution %}
                  <p><strong>Лучшее решение:</strong> Time: {{best_solution.time}} с.              Memory: {{best_solution.memory}} {{title.memory_unit}} </p>
                  <div name="no_edit_code"><textarea>{{best_solution}}</textarea></div>
                {% else %}
                {% endif %}
                {% if text %}
                  <p><strong>Статус последнего решении:</strong></p>
                  <div name="no_edit_text"><textarea>{{text}}</textarea></div>
                {% elif code.text %}
                  <p><strong>Ошибки в последнем решении:</strong></p>
                  <div name="no_edit_text"><textarea>{{code.text}}</textarea></div>
                {% else %}
                  <p><strong>Еще не загружено ни одного решения</strong></p>
                {% endif %}
                {% comment %} <p>Отображать лучшее решение / ошибки <div class="switch-btn" data-show="#bl-1" data-hide="#bl-2" style="margin: 10px;"></div></p>
                <div id="bl-2">
                  {% if best_solution %}
                  <p><strong>Лучшее решение:</strong> Time: {{best_solution.time}} с.              Memory: {{best_solution.memory}} {{title.memory_unit}} </p>
                  <!-- <div name="no_edit_code"><textarea>{{title.up_code}}</textarea></div> -->
                  <div name="no_edit_code"><textarea>{{best_solution}}</textarea></div>
                  <!-- <div name="no_edit_code"><textarea>{{title.down_code}}</textarea></div> -->
                  {% else %}
                  <p><strong>Еще не загружено ни одного решения</strong></p>
                  {% endif %}
                </div>
                <div id="bl-1" class="bl-hide">
                  {% if text %}
                  <p><strong>Ошибки в последнем решении:</strong></p>
                  <div name="no_edit_text"><textarea>{{text}}</textarea></div>
                  {% else %}
                  <p><strong>Еще не загружено ни одного решения</strong></p>
                  {% endif %}
                </div> {% endcomment %}

            </div>
        </div>
        <div class="CodeInput">
            <form class="CodeInput" method="POST">
                {% csrf_token %}
                {% if code %}
                Time: {{code.time}} с.              Memory: {{code.memory}} kiB              Показать ошибки: 
                {% else %}
                
                {% endif %}
                <!-- <div name="no_edit_code"><textarea>{{title.up_code}}</textarea></div> -->
                <div name="edit_code"><textarea name="code">{% if code %}{{code}}{% else %}{{title.up_code}}{% endif %}</textarea></div>
                <!-- <div name="no_edit_code"><textarea>{{title.down_code}}</textarea></div> -->
                <button class="SubmitButton">Отправить</button>
                {% if title.open_assert %}
                <p></p>
                <p><strong>Тесты:</strong></p> 
                <div name="no_edit_code"><textarea>{{ title.open_assert }}</textarea></div>
                {% endif %}
            </form>
        </div>
    </div>
</main>

{% comment %} <script src="{% static "js/jquery/jquery-3.7.0.min.js" %}"></script> {% endcomment %}

<script>
  $(function () {
    $('.switch-btn').click(function () {
      const $btn = $(this);
      $btn.toggleClass('switch-on');
      
      // Получаем элементы для управления
      const showSelector = $btn.attr('data-show') || '';
      const hideSelector = $btn.attr('data-hide') || '';

      if ($btn.hasClass('switch-on')) {
        // Показываем целевой блок и скрываем другой
        $(showSelector).removeClass('bl-hide');
        $(hideSelector).addClass('bl-hide');
      } else {
        // Показываем обратный блок и скрываем целевой
        $(showSelector).addClass('bl-hide');
        $(hideSelector).removeClass('bl-hide');
      }
    });
  });
</script>
    
{% endblock  %}